<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Verify digital file authenticity using cryptographic Content Identifiers (CIDs)." />
  <meta name="keywords" content="file verification, CID, IPFS, blockchain, NFT, authenticity, provenance, digital assets" />
  <meta name="author" content="VERICID" />
  <title>VERICID - Digital File Authenticity Verification</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React and Babel -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Dependencies -->
  <script src="https://unpkg.com/date-fns@2.30.0/dist/date-fns.min.js"></script>
  <script src="https://unpkg.com/lucide-react@latest/dist/lucide-react.umd.js"></script>
  <script src="https://unpkg.com/multiformats@13.0.0/dist/index.min.js"></script>

  <style>
    body {
      margin: 0;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef } = React;

    const VericidApp = () => {
      const [view, setView] = useState("home");
      const [file, setFile] = useState(null);
      const [cids, setCids] = useState(null);
      const [isGenerating, setIsGenerating] = useState(false);
      const [isSignedIn, setIsSignedIn] = useState(false);
      const [historyData, setHistoryData] = useState(null);
      const fileInputRef = useRef(null);

      const handleSignIn = () => setIsSignedIn(true);
      const handleSignOut = () => setIsSignedIn(false);

      const generateCID = async (file) => {
        setIsGenerating(true);
        try {
          const buffer = new Uint8Array(await file.arrayBuffer());
          const { CID } = multiformats;
          const { sha256 } = multiformats.hashes.sha2;
          const raw = multiformats.codecs.raw;
          const hash = await sha256.digest(buffer);
          const cidV0 = CID.create(0, 0x55, hash);
          const cidV1 = CID.create(1, raw.code, hash);

          const cidPair = {
            v0: cidV0.toString(),
            v1: cidV1.toString()
          };

          setCids(cidPair);
          setHistoryData({
            cid: cidPair.v1,
            origins: [
              {
                network: "ethereum",
                address: "0xBd3531dA5CF5857e7CfAA92426877b022e612cf8",
                metadata: {
                  type: "NFT",
                  standard: "ERC721"
                },
                timestamp: new Date().toISOString()
              }
            ],
            metadata: {
              totalOrigins: 1,
              lastFound: new Date().toISOString()
            }
          });
        } catch (err) {
          console.error("Error generating CID:", err);
        }
        setIsGenerating(false);
      };

      const handleFileChange = (e) => {
        const file = e.target.files[0];
        setFile(file);
        generateCID(file);
      };

      const renderView = () => {
        if (view === "dashboard") {
          return <div className="p-6 text-center">üìä Dashboard functionality coming soon...</div>;
        }
        if (view === "settings") {
          return <div className="p-6 text-center">‚öôÔ∏è Settings panel coming soon...</div>;
        }
        return (
          <div className="max-w-4xl mx-auto p-6">
            <h2 className="text-2xl mb-4 font-bold">Upload a File</h2>
            <input ref={fileInputRef} type="file" onChange={handleFileChange} className="mb-4" />
            {isGenerating && <p className="text-yellow-400">Generating CID...</p>}
            {cids && (
              <div className="bg-zinc-900 p-4 rounded-lg">
                <p className="mb-2">CID v0: <code>{cids.v0}</code></p>
                <p className="mb-2">CID v1: <code>{cids.v1}</code></p>
              </div>
            )}
            {historyData && (
              <div className="mt-6">
                <h3 className="text-lg font-bold">History</h3>
                <p>Total Origins: {historyData.metadata.totalOrigins}</p>
              </div>
            )}
          </div>
        );
      };
      return (
        <div className="min-h-screen bg-black text-white font-mono">
          <header className="p-4 flex justify-between items-center border-b border-zinc-800">
            <div className="text-xl font-bold">VERICID</div>
            <nav className="flex gap-4">
              <button onClick={() => setView("home")} className="hover:underline">Home</button>
              <button onClick={() => setView("dashboard")} className="hover:underline">Dashboard</button>
              <button onClick={() => setView("settings")} className="hover:underline">Settings</button>
              {!isSignedIn ? (
                <button onClick={handleSignIn} className="hover:underline">Sign In</button>
              ) : (
                <button onClick={handleSignOut} className="hover:underline">Sign Out</button>
              )}
            </nav>
          </header>
          {renderView()}
          <footer className="mt-10 p-4 text-center border-t border-zinc-800 text-sm text-zinc-400">
            &copy; {new Date().getFullYear()} VERICID. All rights reserved.
          </footer>
        </div>
      );
    };

    ReactDOM.render(<VericidApp />, document.getElementById("root"));
  </script>
</body>
</html>
    const VericidApp = () => {
      const [isSignedIn, setIsSignedIn] = useState(() => {
        return localStorage.getItem("vericid_signed_in") === "true";
      });
      const [view, setView] = useState("home");
      const [file, setFile] = useState(null);
      const [cids, setCids] = useState(null);
      const [isLoading, setIsLoading] = useState(false);
      const [error, setError] = useState(null);
      const [historyData, setHistoryData] = useState(null);

      const handleSignIn = () => {
        setIsSignedIn(true);
        localStorage.setItem("vericid_signed_in", "true");
      };

      const handleSignOut = () => {
        setIsSignedIn(false);
        localStorage.removeItem("vericid_signed_in");
        setView("home");
      };

      const handleFileSelect = async (event) => {
        const selectedFile = event.target.files[0];
        if (!selectedFile) return;

        setIsLoading(true);
        setFile(selectedFile);

        try {
          const arrayBuffer = await selectedFile.arrayBuffer();
          const uint8Array = new Uint8Array(arrayBuffer);
          const { CID } = multiformats;
          const { sha256 } = multiformats.hashes.sha2;
          const raw = multiformats.codecs.raw;
          const hash = await sha256.digest(uint8Array);
          const cidV1 = CID.create(1, raw.code, hash).toString();
          const cidV0 = CID.create(0, 0x55, hash).toString();
          setCids({ v0: cidV0, v1: cidV1 });
          setHistoryData({
            cid: cidV1,
            origins: [
              {
                network: "polygon",
                address: "0x1234567890123456789012345678901234567890",
                metadata: { type: "NFT", standard: "ERC1155" },
                timestamp: Date.now(),
              },
              {
                network: "base",
                address: "0x9876567890123456789012345678901234567890",
                metadata: { type: "NFT", standard: "ERC721" },
                timestamp: Date.now() - 10000,
              },
            ],
            metadata: {
              totalOrigins: 2,
              firstFound: Date.now() - 10000,
              lastFound: Date.now(),
            },
          });
        } catch (err) {
          setError("Something went wrong! Don't worry, Matt is on it.");
          setCids(null);
        } finally {
          setIsLoading(false);
        }
      };
      const copyToClipboard = (text) => {
        navigator.clipboard.writeText(text).then(() => {
          alert("Copied to clipboard!");
        });
      };

      const exportVerification = () => {
        if (!file || !cids || !historyData) return;
        const blob = new Blob([JSON.stringify({ file: file.name, cids, historyData }, null, 2)], { type: "application/json" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `vericid-${file.name.replace(/\.[^/.]+$/, "")}.json`;
        link.click();
      };

      return (
        <div className="min-h-screen bg-black text-white p-6 font-mono">
          <header className="flex justify-between items-center mb-6">
            <h1 className="text-2xl font-bold">VERICID</h1>
            <nav className="flex gap-4">
              {isSignedIn ? (
                <>
                  <button onClick={() => setView("dashboard")} className="hover:underline">Dashboard</button>
                  <button onClick={() => setView("settings")} className="hover:underline">Settings</button>
                  <button onClick={handleSignOut} className="hover:underline text-red-500">Sign Out</button>
                </>
              ) : (
                <button onClick={handleSignIn} className="hover:underline text-green-500">Sign In</button>
              )}
            </nav>
          </header>

          {view === "dashboard" && isSignedIn && (
            <div>
              <h2 className="text-xl font-bold mb-4">Dashboard</h2>
              <p>You are signed in. Upload a file from the Home page to generate verification history.</p>
            </div>
          )}

          {view === "settings" && isSignedIn && (
            <div>
              <h2 className="text-xl font-bold mb-4">Settings</h2>
              <p>Settings functionality will go here. Customize your verification preferences.</p>
            </div>
          )}

          {view === "home" && (
            <>
              <div className="mb-6">
                <input type="file" onChange={handleFileSelect} className="text-white" />
              </div>

              {isLoading && <p>Generating CID and fetching history...</p>}

              {error && <p className="text-red-400">{error}</p>}

              {cids && (
                <div className="space-y-4">
                  <div>
                    <h3 className="font-bold">CID v0</h3>
                    <div className="flex items-center gap-2">
                      <code className="break-all">{cids.v0}</code>
                      <button onClick={() => copyToClipboard(cids.v0)} className="px-2 py-1 bg-zinc-700 rounded">Copy</button>
                    </div>
                  </div>
                  <div>
                    <h3 className="font-bold">CID v1</h3>
                    <div className="flex items-center gap-2">
                      <code className="break-all">{cids.v1}</code>
                      <button onClick={() => copyToClipboard(cids.v1)} className="px-2 py-1 bg-zinc-700 rounded">Copy</button>
                    </div>
                  </div>
                  <button onClick={exportVerification} className="mt-4 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">
                    Export Verification JSON
                  </button>
                </div>
              )}

              {historyData && (
                <div className="mt-6">
                  <h3 className="font-bold mb-2">CID History</h3>
                  <ul className="space-y-2">
                    {historyData.origins.map((origin, i) => (
                      <li key={i} className="border border-zinc-700 rounded p-3">
                        <div><strong>Network:</strong> {origin.network}</div>
                        <div><strong>Address:</strong> {origin.address}</div>
                        <div><strong>Standard:</strong> {origin.metadata.standard}</div>
                        <div><strong>Timestamp:</strong> {new Date(origin.timestamp).toLocaleString()}</div>
                      </li>
                    ))}
                  </ul>
                </div>
              )}
            </>
          )}
        </div>
      );
    };

    ReactDOM.render(<VericidApp />, document.getElementById("root"));
  </script>
</body>
</html>
